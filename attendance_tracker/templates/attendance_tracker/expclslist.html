{% extends "attendance_tracker/loggedin_base.html" %}
{% load static %}
{% block content %}
	<h1 class="border-bottom mb-4">Expanded Class List</h1>
	<!-- Nav tabs -->
	<ul class="nav nav-tabs">
		<li class="nav-item">
			<a class="nav-link active" id="specialtabs" data-toggle="tab" href="#standard" role="tab">Student Summary View</a>
		</li>
		<li class="nav-item">
            <a class="nav-link" id="specialtabs" data-toggle="tab" href="#address" role="tab">Address View</a>
        </li>
        <li class="nav-item">
            <a class="nav-link" id="specialtabs" data-toggle="tab" href="#contactnum" role="tab">Contact View</a>
        </li>
    </ul>
    <!-- Tab panes -->
    <div class="tab-content">
    	<!-- Standard View Table -->
       	<div class="tab-pane active p-3" id="standard" role="tabpanel">
       		<div class="d-flex justify-content-between">
				<div><h4>{{ user.first_name }} {{ user.last_name }} Students</h4></div>
				<div>
					{% if user.is_ultimate %}
						<a class="btn btn-info" role="button" aria-pressed="true" href="{% url 'class-list' %}"><i class="fa fa-arrow-left" aria-hidden="true"></i>&nbsp; Basic View</a>
					{% endif %}
					<a id="clrfilterone" class="btn btn-info" role="button" aria-pressed="true" href="{% url 'exp-list' %}"><i class="fa fa-refresh" aria-hidden="true"></i>&nbsp; Reset to Default</a>
				</div>
			</div>
			<br>
       		<div class="table-responsive">
                <table id = "standview" class="table table-bordered table-light dt-responsive nowrap" style="width:100%;">
					<thead>
						<tr>
							<th scope="col">#</th>
							<th scope="col">First</th>
							<th scope="col">Last</th>
							<th scope="col">Gr</th>
							<th scope="col">Date of Birth</th>
							<th scope="col">Personal Cell</th>
							<th scope="col">Student Email</th>
						</tr>
					</thead>
					<tbody>
						{% for member in contacts %}
							{% if member.student_grade.student.archived == False %}
								<tr>
									<td scope="row">{{ forloop.counter }}</td>
									<td>{{ member.student_grade.student.first_name }}</td>
									<td>{{ member.student_grade.student.last_name }}</td>
									<td>{{ member.student_grade.grade }}</td>
									<td>{{ member.student_grade.student.dob|date:"Y/m/d" }}</td>
									<td>{{ member.personal_cell }}</td>
									<td>{{ member.student_email }}</td>
								</tr>
							{% endif %}
						{% endfor %}
					</tbody>
					<tfoot>
						<tr>
							<th scope="col" style="text-align: center;">#</th>
							<th scope="col" style="text-align: center;">First</th>
							<th scope="col" style="text-align: center;">Last</th>
							<th scope="col" style="text-align: center;">Gr</th>
							<th scope="col" style="text-align: center;">Date of Birth</th>
							<th scope="col" style="text-align: center;">Personal Cell</th>
							<th scope="col" style="text-align: center;">Student Email</th>
						</tr>
					</tfoot>
				</table>
            </div>
        </div>
        <!-- Address View Table -->
        <div class="tab-pane p-3" id="address" role="tabpanel">
        		<div class="d-flex justify-content-between">
				<div><h4>{{ user.first_name }} {{ user.last_name }} Students</h4></div>
				<div>
					{% if user.is_ultimate %}
						<a class="btn btn-info" role="button" aria-pressed="true" href="{% url 'class-list' %}"><i class="fa fa-arrow-left" aria-hidden="true"></i>&nbsp; Basic View</a>
					{% endif %}
					<a id="clrfiltertwo" class="btn btn-info" role="button" aria-pressed="true" href="{% url 'exp-list' %}"><i class="fa fa-refresh" aria-hidden="true"></i>&nbsp; Reset to Default</a>
				</div>
			</div>
			<br>
       		<div class="table-responsive">
                <table id = "addview" class="table table-bordered table-light dt-responsive nowrap" style="width:100%;">
					<thead>
						<tr>
							<th scope="col">#</th>
							<th scope="col">First</th>
							<th scope="col">Last</th>
							<th scope="col">Gr</th>
							<th scope="col">Address</th>
							<th scope="col">City</th>
							<th scope="col">St</th>
							<th scope="col">Zip</th>
						</tr>
					</thead>
					<tbody>
						{% for member in contacts %}
							{% if member.student_grade.student.archived == False %}
								<tr>
									<td scope="row">{{ forloop.counter }}</td>
									<td>{{ member.student_grade.student.first_name }}</td>
									<td>{{ member.student_grade.student.last_name }}</td>
									<td>{{ member.student_grade.grade }}</td>
									<td>{{ member.address }}</td>
									<td>{{ member.city }}</td>
									<td>{{ member.state }}</td>
									<td>{{ member.zipcode }}</td>
								</tr>
							{% endif %}
						{% endfor %}
					</tbody>
					<tfoot>
						<tr>
							<th scope="col" style="text-align: center;">#</th>
							<th scope="col" style="text-align: center;">First</th>
							<th scope="col" style="text-align: center;">Last</th>
							<th scope="col" style="text-align: center;">Gr</th>
							<th scope="col" style="text-align: center;">Address</th>
							<th scope="col" style="text-align: center;">City</th>
							<th scope="col" style="text-align: center;">St</th>
							<th scope="col" style="text-align: center;">Zip</th>
						</tr>
					</tfoot>
				</table>
            </div>
        </div>
        <!-- Contact View Table -->
        <div class="tab-pane p-3" id="contactnum" role="tabpanel">
        		<div class="d-flex justify-content-between">
				<div><h4>{{ user.first_name }} {{ user.last_name }} Students</h4></div>
				<div>
					{% if user.is_ultimate %}
						<a class="btn btn-info" role="button" aria-pressed="true" href="{% url 'class-list' %}"><i class="fa fa-arrow-left" aria-hidden="true"></i>&nbsp; Basic View</a>
					{% endif %}
					<a id="clrfilterthree" class="btn btn-info" role="button" aria-pressed="true" href="{% url 'exp-list' %}"><i class="fa fa-refresh" aria-hidden="true"></i>&nbsp; Reset to Default</a>
				</div>
			</div>
			<br>
       		<div class="table-responsive">
                <table id = "contactview" class="table table-bordered table-light dt-responsive nowrap" style="width:100%;">
					<thead>
						<tr>
							<th scope="col">#</th>
							<th scope="col">First</th>
							<th scope="col">Last</th>
							<th scope="col">Gr</th>
							<th scope="col">Father Cell</th>
							<th scope="col">Mother Cell</th>
							<th scope="col">Parent Email</th>
						</tr>
					</thead>
					<tbody>
						{% for member in contacts %}
							{% if member.student_grade.student.archived == False %}
								<tr>
									<td scope="row">{{ forloop.counter }}</td>
									<td>{{ member.student_grade.student.first_name }}</td>
									<td>{{ member.student_grade.student.last_name }}</td>
									<td>{{ member.student_grade.grade }}</td>
									<td>{{ member.father_cell }}</td>
									<td>{{ member.mother_cell }}</td>
									<td>{{ member.parent_email }}</td>
								</tr>
							{% endif %}
						{% endfor %}
					</tbody>
					<tfoot>
						<tr>
							<th scope="col" style="text-align: center;">#</th>
							<th scope="col" style="text-align: center;">First</th>
							<th scope="col" style="text-align: center;">Last</th>
							<th scope="col" style="text-align: center;">Gr</th>
							<th scope="col" style="text-align: center;">Father Cell</th>
							<th scope="col" style="text-align: center;">Mother Cell</th>
							<th scope="col" style="text-align: center;">Parent Email</th>
						</tr>
					</tfoot>
				</table>
            </div>
        </div>
    </div>
{% endblock content %}
{% block scripts %}
<script>
$(document).ready(function() {
	/****** Standard View Table Control  ******/
	// Setup - add a text input to each footer cell
    $('#standview tfoot th').not(":eq(0)") //Exclude columns 1
                          .each( function () {
        var title = $('#standview thead th').eq( $(this).index() ).text();
        $(this).html( '<div class="input-group"><span class="input-group-addon"></span><input type="text" id="textboxsize" placeholder="Filter by '+title+'" /></div>' );
    });

	var table = $('#standview').DataTable({
		stateSave: true,
		lengthChange: true,
		fixedHeader: true,
		buttons: [ 'copy', 'excel', 'csv', 'pdf','print', 'colvis' ],
		pagingType: 'full_numbers',
		lengthMenu: [[5, 10, 25, 50, 100, -1], [5, 10, 25, 50, 100, "All"]],
		pageLength: 10,
	});

	table.buttons().container()
		.appendTo( '#standview_wrapper .col-md-6:eq(0)' );

	// Apply the search
    table.columns().eq( 0 ).each( function ( colIdx ) {
        if (colIdx == 0) return; //Do not add event handlers for these columns

        $( 'input', table.column( colIdx ).footer() ).on( 'keyup change clear', function () {
            table
                .column( colIdx )
                .search( this.value )
                .draw();
        });
    }); 

    //Gives user the option to clear all fitlers
    $('#clrfilterone').on('click', function(){
  		$('#standview').DataTable().state.clear();
	});
});
</script>
<script>
$(document).ready(function() {
	/****** Address View Table Control  ******/
	// Setup - add a text input to each footer cell
    $('#addview tfoot th').not(":eq(0)") //Exclude columns 1
                          .each( function () {
        var title = $('#addview thead th').eq( $(this).index() ).text();
        $(this).html( '<div class="input-group"><span class="input-group-addon"></span><input type="text" id="textboxsize" placeholder="Filter by '+title+'" /></div>' );
    });

	var table = $('#addview').DataTable({
		stateSave: true,
		lengthChange: true,
		fixedHeader: true,
		buttons: [ 'copy', 'excel', 'csv', 'pdf','print', 'colvis' ],
		pagingType: 'full_numbers',
		lengthMenu: [[5, 10, 25, 50, 100, -1], [5, 10, 25, 50, 100, "All"]],
		pageLength: 10,
	});

	table.buttons().container()
		.appendTo( '#addview_wrapper .col-md-6:eq(0)' );

	// Apply the search
    table.columns().eq( 0 ).each( function ( colIdx ) {
        if (colIdx == 0) return; //Do not add event handlers for these columns

        $( 'input', table.column( colIdx ).footer() ).on( 'keyup change clear', function () {
            table
                .column( colIdx )
                .search( this.value )
                .draw();
        });
    }); 

    //Gives user the option to clear all fitlers
    $('#clrfiltertwo').on('click', function(){
  		$('#addview').DataTable().state.clear();
	});
});
</script>
<script>
$(document).ready(function() {
	/****** Address View Table Control  ******/
	// Setup - add a text input to each footer cell
    $('#contactview tfoot th').not(":eq(0)") //Exclude columns 1
                          .each( function () {
        var title = $('#contactview thead th').eq( $(this).index() ).text();
        $(this).html( '<div class="input-group"><span class="input-group-addon"></span><input type="text" id="textboxsize" placeholder="Filter by '+title+'" /></div>' );
    });

	var table = $('#contactview').DataTable({
		stateSave: true,
		lengthChange: true,
		fixedHeader: true,
		buttons: [ 'copy', 'excel', 'csv', 'pdf','print', 'colvis' ],
		pagingType: 'full_numbers',
		lengthMenu: [[5, 10, 25, 50, 100, -1], [5, 10, 25, 50, 100, "All"]],
		pageLength: 10,
	});

	table.buttons().container()
		.appendTo( '#contactview_wrapper .col-md-6:eq(0)' );

	// Apply the search
    table.columns().eq( 0 ).each( function ( colIdx ) {
        if (colIdx == 0) return; //Do not add event handlers for these columns

        $( 'input', table.column( colIdx ).footer() ).on( 'keyup change clear', function () {
            table
                .column( colIdx )
                .search( this.value )
                .draw();
        });
    }); 

    //Gives user the option to clear all fitlers
    $('#clrfilterthree').on('click', function(){
  		$('#contactview').DataTable().state.clear();
	});
});
</script>
{% endblock scripts %}